{% extends 'admin/base.html' %}
{% import 'macros/crud.html' as crud %}

{% set level = {0: 'generic', 1: 'outage', 2: 'missing', 3: 'holiday/special event'} %}
{% block body %}
<div class="panel panel-default">
  <!-- Default panel contents -->
  <div class="panel-heading">Alerts</div>

  <!-- Table -->
  <table class="table">
    <thead>
      <tr>
        <th>
            <center>
            <button id="btn-select-all" type="button" class="btn btn-primary btn-sm" data-toggle="tooltip" data-placement="top" title="Select All">  <span class="glyphicon glyphicon-check"/> </button> 
            <button id="btn-clear-selection" type="button" class="btn btn-danger btn-sm" data-toggle="tooltip" data-placement="top" title="Delete Selected"><span class="glyphicon glyphicon-remove"/></button> 
            </center>
        </th>
        <th>Path</th>
        <th>Stat</th>
        <th>Level</th>
        <th>Author</th>
        <th>Comment</th>
        <th>Created at</th>
      </tr>
    </thead>
    <tbody>
     {% for row in data %}
      <tr>
        <center>
        <td>
            <center>
            <span id="edit-{{ loop.index0 }}" class="glyphicon glyphicon-pencil" aria-hidden="true" data-toggle="tooltip" data-placement="top" title="Edit"></span>
            <input id="checkbox-{{ loop.index0 }}" type="checkbox" aria-label="..." data-toggle="tooltip" data-placement="top" title="Mark for deletion">
            </center>
        </td>
        {% for col in row %}
            <td>
            {% if loop.index == 3 %}
                {{ level[col] }}                
            {% else %}
                {{ col }}
            {% endif %}
            </td>
        {% endfor %}
      </tr>
     {% endfor %}
    </tbody>
  </table>
</div>
{{ crud.modal() }}
{% endblock %}

{% block tail %}
{{ super() }}
<script type="text/javascript">
{{ crud.js(data,  
    {0:'source', 1:'stat', 2:'category', 3:'author', 4:'comment', 5:'ts'}) }}

$(function () {
    $('[data-toggle="tooltip"]').tooltip()
});

</script>
{% endblock %}